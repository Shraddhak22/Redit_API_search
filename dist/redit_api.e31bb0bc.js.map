{"version":3,"sources":["index.js"],"names":["searchForm","document","querySelector","addEventListener","event","searchTerm","value","sortBy","limit","showMessage","redditSearch","then","results","outputDiv","forEach","result","showResult","getElementById","innerHTML","preventDefault","message","className","newDiv","createElement","newContent","createTextNode","appendChild","currentDiv","insertBefore","fetch","res","json","data","children","map","item","console","log","image","preview","images","source","url","title","truncateString","selftext","subreddit","score","myString","shortened","indexOf","substring"],"mappings":"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","file":"redit_api.e31bb0bc.js","sourceRoot":"..","sourcesContent":["const searchForm = document.querySelector(\"#searchForm\");\r\n\r\nsearchForm.addEventListener(\"submit\", event => {\r\n  const searchTerm = document.querySelector(\"#searchTerm\").value;\r\n  const sortBy = document.querySelector('input[name=\"sortByOptions\"]:checked')\r\n    .value;\r\n  const limit = document.querySelector(\"#limit\").value;\r\n  if (searchTerm === \"\") {\r\n    showMessage(\"Please enter the search term\", \"alert-danger\");\r\n  } else {\r\n    debugger;\r\n\r\n    redditSearch(searchTerm, sortBy, limit).then(results => {\r\n      let outputDiv = '<div class=\"card-columns\">';\r\n\r\n      results.forEach(result => {\r\n        outputDiv = showResult(result, outputDiv);\r\n      });\r\n      outputDiv += \"</div>\";\r\n      document.getElementById(\"results\").innerHTML = outputDiv;\r\n    });\r\n  }\r\n  event.preventDefault();\r\n});\r\n\r\nshowMessage = (message, className) => {\r\n  var newDiv = document.createElement(\"div\");\r\n  newDiv.className = `alert ${className} my-2`;\r\n  var newContent = document.createTextNode(message);\r\n\r\n  newDiv.appendChild(newContent);\r\n  currentDiv = document.getElementById(\"search\");\r\n  document.getElementById(\"searchContainer\").insertBefore(newDiv, currentDiv);\r\n};\r\n\r\nredditSearch = (searchTerm, sortBy, limit) => {\r\n  return fetch(\r\n    `http://www.reddit.com/search.json?q=${searchTerm}&sort=${sortBy}&limit=${limit}`\r\n  )\r\n    .then(res => res.json())\r\n    .then(data => {\r\n      return data.data.children.map(item => item.data);\r\n    });\r\n};\r\n\r\nshowResult = (result, outputDiv) => {\r\n  console.log(result);\r\n  let image = result.preview\r\n    ? result.preview.images[0].source.url\r\n    : \"https://cdn.comparitech.com/wp-content/uploads/2017/08/reddit-1.jpg\";\r\n\r\n  outputDiv += `\r\n    <div class=\"card mb-2\">\r\n    <img class=\"card-img-top\" src=\"${image}\" alt=\"Card image cap\">\r\n    <div class=\"card-body\">\r\n      <h5 class=\"card-title\">${result.title}</h5>\r\n      <p class=\"card-text\">${truncateString(result.selftext, 100)}</p>\r\n      <a href=\"${result.url}\" target=\"_blank\r\n      \" class=\"btn btn-primary\">Read More</a>\r\n      <hr>\r\n      <span class=\"badge badge-secondary\">Subreddit: ${result.subreddit}</span> \r\n      <span class=\"badge badge-dark\">Score: ${result.score}</span>\r\n    </div>\r\n  </div>\r\n    `;\r\n\r\n  return outputDiv;\r\n};\r\n\r\nfunction truncateString(myString, limit) {\r\n  const shortened = myString.indexOf(\" \", limit);\r\n  if (shortened == -1) return myString;\r\n  return myString.substring(0, shortened);\r\n}\r\n"]}